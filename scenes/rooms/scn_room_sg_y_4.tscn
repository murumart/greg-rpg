[gd_scene load_steps=7 format=4 uid="uid://cwetkgvwlby0i"]

[ext_resource type="PackedScene" uid="uid://c1fjmpmle64kr" path="res://scenes/rooms/sg_room_base.tscn" id="1_tgjow"]
[ext_resource type="PackedScene" uid="uid://b2j5cwgvjb6f2" path="res://scenes/decor/sgpuzzle/light_target_block.tscn" id="2_hq4by"]
[ext_resource type="PackedScene" uid="uid://c1wvxpth8q38v" path="res://scenes/decor/sgpuzzle/light_emitter_block.tscn" id="3_18dv3"]
[ext_resource type="TileSet" uid="uid://b32gv25wcvlpy" path="res://resources/res_sg_tiles.tres" id="4_18dv3"]

[sub_resource type="GDScript" id="GDScript_hq4by"]
script/source = "extends Node2D

@onready var light_target_block := $LightTargetBlock
@onready var light_target_block_2 := $LightTargetBlock2
@onready var floor: TileMapLayer = $Floor
@onready var blocker: CollisionShape2D = $CollisionShape2D

var solved: bool:
	set(to): DAT.set_data(\"sg_y_4_solved\", to)
	get: return DAT.get_data(\"sg_y_4_solved\", false)


func _ready() -> void:
	_check()
	light_target_block.activated.connect(_check)
	light_target_block_2.activated.connect(_check)


func _check() -> void:
	floor.hide()
	if not solved and light_target_block.active and light_target_block_2.active:
		solved = true
		SND.play_sound(preload(\"res://sounds/pennistong/ppos.ogg\"))
	if solved:
		blocker.disabled = true
		floor.show()
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_18dv3"]
size = Vector2(62, 32)

[node name="SgY4" instance=ExtResource("1_tgjow")]

[node name="COLLISION" parent="COLLISION" index="0"]
tile_map_data = PackedByteArray("AAD///z/AAAPAA8AAAD+//z/AAAPAA8AAAD9//z/AAAPAA8AAAD8//z/AAAPAA8AAAD7//z/AAAPAA8AAAD6//z/AAAPAA8AAAD5//z/AAAPAA8AAAD5//3/AAAPAA8AAAD5//7/AAAPAA8AAAD5////AAAPAA8AAAD5/wAAAAAPAA8AAAD6/wAAAAAPAA8AAAD7/wAAAAAPAA8AAAD8/wAAAAAPAA8AAAD9/wAAAAAPAA8AAAD+/wAAAAAPAA8AAAD//wAAAAAPAA8AAAAAAAAAAAAPAA8AAAABAAAAAAAPAA8AAAACAAAAAAAPAA8AAAACAP//AAAPAA8AAAACAP7/AAAPAA8AAAACAP3/AAAPAA8AAAACAPz/AAAPAA8AAAACAPv/AAAPAA8AAAADAP3/AAAPAA8AAAAEAP3/AAAPAA8AAAAFAP3/AAAPAA8AAAAGAP3/AAAPAA8AAAAHAP3/AAAPAA8AAAAIAP3/AAAPAA8AAAAJAP3/AAAPAA8AAAAKAP3/AAAPAA8AAAAKAPz/AAAPAA8AAAAKAPv/AAAPAA8AAAAKAPr/AAAPAA8AAAAKAPn/AAAPAA8AAAAKAPj/AAAPAA8AAAAKAPf/AAAPAA8AAAAKAPb/AAAPAA8AAAAKAPX/AAAPAA8AAAAJAPX/AAAPAA8AAAAIAPX/AAAPAA8AAAAHAPX/AAAPAA8AAAAGAPX/AAAPAA8AAAAFAPX/AAAPAA8AAAAEAPX/AAAPAA8AAAADAPX/AAAPAA8AAAACAPX/AAAPAA8AAAACAPb/AAAPAA8AAAACAPf/AAAPAA8AAAD///v/AAAPAA8AAAD///r/AAAPAA8AAAD///n/AAAPAA8AAAD///j/AAAPAA8AAAD///f/AAAPAA8AAAD///b/AAAPAA8AAAD///X/AAAPAA8AAAD///T/AAAPAA8AAAD///P/AAAPAA8AAAD///L/AAAPAA8AAAAAAPL/AAAPAA8AAAABAPL/AAAPAA8AAAACAPL/AAAPAA8AAAADAPL/AAAPAA8AAAAEAPL/AAAPAA8AAAAFAPL/AAAPAA8AAAAGAPL/AAAPAA8AAAAHAPL/AAAPAA8AAAAIAPL/AAAPAA8AAAAJAPL/AAAPAA8AAAAKAPL/AAAPAA8AAAALAPL/AAAPAA8AAAAMAPL/AAAPAA8AAAANAPL/AAAPAA8AAAAOAPL/AAAPAA8AAAAPAPL/AAAPAA8AAAAQAPL/AAAPAA8AAAARAPL/AAAPAA8AAAASAPL/AAAPAA8AAAATAPL/AAAPAA8AAAATAPP/AAAPAA8AAAATAPT/AAAPAA8AAAATAPX/AAAPAA8AAAASAPX/AAAPAA8AAAARAPX/AAAPAA8AAAAQAPX/AAAPAA8AAAAPAPX/AAAPAA8AAAAOAPX/AAAPAA8AAAANAPX/AAAPAA8AAAAMAPX/AAAPAA8AAAALAPX/AAAPAA8AAAA=")

[node name="Floor" parent="." index="3"]
tile_map_data = PackedByteArray("AAD6//3/AAABAAAAAAD6//7/AAABAAEAAAD6////AAABAAIAAAD7////AAACAAIAAAD8////AAACAAIAAAD9////AAACAAIAAAD9//7/AAAEAAAAAAD8//7/AAAEAAAAAAD8//3/AAACAAAAAAD7//3/AAACAAAAAAD7//7/AAAEAAAAAAD9//3/AAACAAAAAAD+//3/AAACAAAAAAD///3/AAACAAAAAAAAAP3/AAACAAEAAAABAP3/AAADAAEAAAD+//7/AAAEAAAAAAD/////AAACAAIAAAAAAP//AAACAAIAAAABAP//AAADAAIAAAABAP7/AAADAAEAAAAAAP7/AAACAAEAAAD///7/AAACAAEAAAD+////AAACAAIAAAAAAPj/AAABAAEAAAABAPj/AAAEAAAAAAACAPj/AAACAAAAAAACAPn/AAACAAEAAAABAPn/AAAEAAAAAAABAPr/AAACAAEAAAABAPv/AAADAAEAAAABAPz/AAADAAEAAAAAAPz/AAABAAEAAAAAAPv/AAABAAEAAAAAAPr/AAABAAEAAAAAAPn/AAABAAEAAAACAPr/AAACAAIAAAADAPb/AAABAAAAAAADAPf/AAABAAEAAAADAPj/AAACAAEAAAADAPn/AAAEAAAAAAADAPr/AAACAAEAAAADAPv/AAABAAEAAAADAPz/AAABAAIAAAAEAPz/AAACAAIAAAAFAPz/AAACAAIAAAAGAPz/AAACAAIAAAAHAPz/AAACAAIAAAAIAPz/AAACAAIAAAAJAPz/AAADAAIAAAAJAPv/AAADAAEAAAAJAPr/AAADAAEAAAAJAPn/AAADAAEAAAAJAPj/AAADAAEAAAAJAPf/AAADAAEAAAAJAPb/AAADAAAAAAAHAPb/AAACAAAAAAAGAPb/AAACAAAAAAAFAPb/AAACAAAAAAAEAPb/AAACAAAAAAAHAPf/AAAEAAAAAAAIAPf/AAAEAAAAAAAIAPb/AAACAAAAAAAIAPj/AAACAAEAAAAIAPn/AAAEAAAAAAAIAPr/AAAEAAAAAAAIAPv/AAAEAAAAAAAHAPv/AAAEAAAAAAAGAPv/AAACAAEAAAAFAPr/AAAEAAAAAAAFAPn/AAACAAEAAAAEAPn/AAAEAAAAAAAEAPj/AAAEAAAAAAAEAPf/AAAEAAAAAAAEAPr/AAACAAEAAAAEAPv/AAAEAAAAAAAFAPv/AAACAAEAAAAHAPr/AAACAAEAAAAHAPn/AAACAAEAAAAHAPj/AAACAAEAAAAGAPf/AAAEAAAAAAAFAPf/AAAEAAAAAAAFAPj/AAAEAAAAAAAGAPn/AAACAAEAAAAGAPr/AAACAAEAAAAGAPj/AAACAAEAAAABAPf/AAADAAEAAAABAPb/AAADAAEAAAAAAPb/AAABAAEAAAAAAPX/AAABAAEAAAAAAPT/AAABAAEAAAABAPX/AAADAAEAAAABAPT/AAACAAEAAAABAPP/AAACAAAAAAACAPT/AAACAAIAAAADAPT/AAACAAIAAAAAAPP/AAABAAAAAAACAPP/AAACAAAAAAADAPP/AAACAAAAAAAEAPP/AAADAAAAAAAAAPf/AAABAAEAAAAEAPT/AAADAAIAAAAIAPT/AAABAAIAAAAJAPT/AAACAAIAAAAIAPP/AAABAAAAAAAJAPP/AAACAAAAAAAKAPP/AAACAAAAAAALAPP/AAACAAAAAAAMAPP/AAACAAAAAAANAPP/AAACAAAAAAAOAPP/AAACAAAAAAAOAPT/AAACAAIAAAANAPT/AAACAAIAAAAMAPT/AAACAAIAAAALAPT/AAACAAIAAAAKAPT/AAACAAIAAAAPAPT/AAACAAIAAAAPAPP/AAACAAAAAAAQAPP/AAACAAAAAAARAPT/AAACAAIAAAASAPT/AAADAAIAAAASAPP/AAADAAAAAAARAPP/AAACAAAAAAAQAPT/AAACAAIAAAA=")

[node name="RoomGate" parent="Areas" index="0"]
destination = &"sg_y_3"
gate_id = &"sg-y-34"

[node name="RoomGate2" parent="Areas" index="1"]
position = Vector2(303, -191)
destination = &"sg_y_5"
gate_id = &"sg-y-45"

[node name="Puzzle" type="StaticBody2D" parent="Areas" index="2"]
y_sort_enabled = true
position = Vector2(80, -143)
collision_mask = 0
script = SubResource("GDScript_hq4by")

[node name="LightTargetBlock" parent="Areas/Puzzle" index="0" instance=ExtResource("2_hq4by")]

[node name="LightTargetBlock2" parent="Areas/Puzzle" index="1" instance=ExtResource("2_hq4by")]
position = Vector2(32, 0)

[node name="LightEmitterBlock" parent="Areas/Puzzle" index="2" instance=ExtResource("3_18dv3")]
position = Vector2(32, 48)
direction = 1

[node name="LightEmitterBlock2" parent="Areas/Puzzle" index="3" instance=ExtResource("3_18dv3")]
position = Vector2(64, 48)
direction = 1

[node name="Redirector" parent="Areas/Puzzle" index="4" instance=ExtResource("3_18dv3")]
position = Vector2(48, 64)
emitting = false
direction = 2
role = 1
movable = true
available_directions = 5

[node name="Redirector2" parent="Areas/Puzzle" index="5" instance=ExtResource("3_18dv3")]
position = Vector2(-16, 80)
emitting = false
direction = 2
role = 1
movable = true
available_directions = 5

[node name="Redirector3" parent="Areas/Puzzle" index="6" instance=ExtResource("3_18dv3")]
position = Vector2(0, 80)
emitting = false
direction = -1
role = 1
movable = true
available_directions = 10

[node name="Redirector4" parent="Areas/Puzzle" index="7" instance=ExtResource("3_18dv3")]
position = Vector2(16, 48)
emitting = false
direction = -1
role = 1
movable = true
available_directions = 10

[node name="Redirector5" parent="Areas/Puzzle" index="8" instance=ExtResource("3_18dv3")]
position = Vector2(16, 32)
emitting = false
role = 1
movable = true
available_directions = 10

[node name="Floor" type="TileMapLayer" parent="Areas/Puzzle" index="9"]
y_sort_enabled = true
position = Vector2(-6, 12)
tile_map_data = PackedByteArray("AAAAAPz/AAABAAIAAAABAPz/AAACAAIAAAACAPz/AAACAAIAAAADAPz/AAADAAIAAAAAAPv/AAABAAAAAAABAPv/AAACAAAAAAACAPv/AAACAAAAAAADAPv/AAADAAAAAAA=")
tile_set = ExtResource("4_18dv3")
y_sort_origin = -440

[node name="CollisionShape2D" type="CollisionShape2D" parent="Areas/Puzzle" index="10"]
position = Vector2(26, -50)
shape = SubResource("RectangleShape2D_18dv3")
